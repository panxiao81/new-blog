---
title: "XPS 15 散热改造小记"
date: 2022-12-29T15:38:00+10:00
categories: [
    "Writing"
]
---


我这台 XPS 15 已经陪伴我 3 年多有余了，配置是 i7 8750h + 16GB + 512 GB + 4K Touch 的次顶配版，当时在 Mac 和这台 PC 之间犹豫了很久，最终选择了相信 PC。尽管在 Windows 高分屏优化依托答辩之后，最终还是装了 Hackintosh，之后发现这台电脑配合 macOS 的体验极好，并且这台电脑对 Linux 的支持也非常好。这台电脑毕竟是轻薄本类型，而且搭载了一块标压 CPU，加上一块低压的 1050 Ti GPU，发热问题一直是大难题，在长期使用过后，硅脂大约也早该失效了，现在散热问题已经严重到了不敢让 GPU 工作的地步，已经到了不得不解决的时候了。

<!--more-->

这个本子的模具从 9550 开始使用了三代，并且 9560 和 9570 除了常规升级之外几乎是没有任何变化的。Reddit 上有一篇针对 9560 的散热改造贴，他指出 9560 的散热最大的问题不只是 CPU 和 GPU 本身，而是供电系统的 MOS 管和稳压电路的芯片，Dell 完全没有为供电系统进行散热覆盖，因此当 CPU 和 GPU 的工作压力提升时，供电系统会由于过热导致供电能力下降，极大影响了性能释放，尤其是 GPU，1050 Ti 尽管是 Max-Q 版本，但性能也不应该差到如此地步。这个问题困扰了 9560 和 9570 两代机器，而且由于 8750h 本质上是 14nm++ 的 7700hq 改造版，问题比 9560 还要严重些。

这种散热改造主要有两种方案，一种是把热量导到背板，使用金属背板作为散热器，短期来看效果很不错，但严重的情况会导致整个背板升温，如果你使用的导热垫性能优秀，甚至会导致背板温度上升到 100 多度。一方面这样一来笔记本不能再放到腿上使用，另一方面可能会把热量传导到其他位置如固态硬盘，Wi-Fi 卡等等。另一种方案是把热量导至热管，这样不会对日常使用造成较大影响，尽管会使 CPU 和 GPU 核心上升 1-2 度，但比起供电系统的散热的明显提升，牺牲 CPU 和 GPU 的一两度是非常合算的。

有人曾经在 9560 时代给出过一个非常 Crazy 的散热器模组 Mod，这个论坛现在已经关了，只能从 Web Archive 上翻到网页存档，它定制了一块散热器铜，覆盖了整个供电模组，将热量导至热管彻底解决了问题，定制铜底我是不打算做的，但是借鉴这个思路，我们可以用导热垫覆盖供电模组，把热量导至热管，这就是改造的第二个思路。

> [A Thermal Mod by iunlock](https://web.archive.org/web/20170803105020/http://forum.notebookreview.com/threads/cpu-gpu-temperatures-benchmarks-xps-15-9560-kaby-lake.802345/)
> [How to Get Your XPS 15 Running Cold](https://www.reddit.com/r/Dell/comments/7orxcs/how_to_get_your_xps_15_running_cold/)

## 材料

正好趁这个机会，我打算做点升级和日常维护，这个高配版使用的是 97 kWh 的电池，意味着无法加装 2.5 硬盘。但这块电池在 3 年充放电之后已经只剩下 24 kWh 的实际有效容量了。本来打算一并把电池换掉，结果发现 Dell 这块电池在淘宝上居然售价来到了惊人的 535 RMB。正好我在购入 Surface 后这台笔记本已经很少有移动使用的需求了，所以电池先往后放一放，看之后换一块 56 kWh 版本的电池再加装一块大容量机械硬盘。

16 GB 内存已经越来越难以满足日常使用了，Chrome 本身就是内存大户，平时还要日常运行 Linux 虚拟机。macOS 的内存管理其实非常激进，意味着 macOS 其实比大多数人想象的要吃内存，只是由于 macOS 一般配套高性能 SSD，在进行内存交换的时候相对较快，所以不会有明显的卡顿现象。但如果你作为一个怨种购买过使用混合硬盘型号的 Mac 你就会知道什么叫几乎不能用，这一点尤其在 M1 之后的 Mac 和 Intel 早期型号的 Mac 对比当中尤其明显。M1 Mac 刚上市的时期，很多人说什么 8G Mac 相当于 16G Windows PC，很多人真的信以为真选择了 8GB 版本，结果就出现了后面很多人发现 M1 Mac 的 SSD 所谓读写异常的问题，其实就是因为内存不够，频繁读写 Swap 导致的问题。内存多一点，多余的内存也会拿去做磁盘缓存，电脑越用越快，并不会浪费，所以趁着这次维护，打算把内存加到 32 GB，这样这台电脑应该还能再战几年。

这台电脑从出厂到现在我根本没换过硅脂，Dell 原厂的硅脂据说涂的很烂，而且 3 年多过去硅脂早也该干透了，正好也完整清理一下灰尘。加上散热的改造我需要购入新的硅脂和导热垫。去了解了一下，裸 Die 的芯片其实涂传统硅脂耐久度是不太行的，很多人反应 7921 涂上撑不了几天就开始性能下降，现在在笔记本上最流行的是相变的散热材料，比传统硅脂效果要好得多，持久度也要好得多，我打算给他一个机会。所以这次没有买 7921，选择了 Honeywell 的 7950 相变片。导热垫也顺便换一下，选择了莱尔德 700，两者均购自淘宝极客温控。

内存买了中规中矩的英睿达 DDR4 3200 16G 套条，到手 639，硅脂和导热垫总共只花了 50 块，足够我这一次使用了。另外购入了铠侠 RC20 1TB 换掉原厂的 512 GB 固态，这块性价比较高，比三星的主流货便宜一点，性能足够日常使用，好过原厂东芝盘，这个年初就买完换掉了，购入的时候是 559，现在又降了 150 块，现在只要 409，读写是 2k 读加 1k 写的档次，非常有性价比的一个档位。

可以说这是非常大的一次维护。

再次列出购买的清单供大家参考：

- 16G DDR4 3200 英睿达内存 639
- Honeywell 7950 相变导热片 31 * 50 * 0.2 mm 一片
- Laird 700 导热硅胶片 40 * 80 * 0.5 mm 两片

导热材料都购自淘宝极客温控，内存购自淘宝英睿达旗舰店，正好有秒杀活动，便宜一点。

这些外国佬是几乎不会想到使用这种高级货的，这种高级货不做零售，只有中国有这种大量采购完分装再销售的人，比正经渠道的高级货便宜许多，而且性能相近甚至更好，比如在国外是很难买到信越 7921 这种只批发不零售的东西的，但是淘宝上这东西都烂大街了。有一说一，活在中国也有活在中国的幸福。

## 改造记录

改造前，只要稍微有一点负载，CPU 直接冲到 95 度以上，然后就开始碰到 Intel 100 度墙开始掉速，我觉得基本已经没有测的必要了。

这次最大的是用导热垫搭桥的改造，我拍了一张照片，导热垫切的比较丑，大家凑合看。

![thermal pads](images/other/IMG_2731.jpg)

另外发现，我的感觉是对的，电池鼓包了，而且鼓的还挺厉害。它把触控板都顶起来了，导致我这一段时间都觉得触控板非常硬。97kWh 的电池真的贵的要命，也许我真的可以考虑换 56kWh 的型号，反正也不太在乎续航了。

我就不给它烤鸡了，至少在这样搞完使用过程中温度表现还满稳定，比之前好太多太多了。我拆开热管的时候发现原来的硅脂都彻底干透了，风扇接缝的灰尘也基本把出风全档死了，难怪之前的温度表现那么差。

导热垫改造的效果比我预想的好，高性能工作也不太有问题，唯一不太符合我预想的是 Laird 700 虽然标称 5.0 W/mk，但可能是因为标的比较实诚，导热效果意外的过于好了。而且即便是 0.5 的厚度可能也不够薄，它依然把热量导到了背板，现在背板的电源模块部分只要一开机就瞬间升温。但是好在没有到很烫手的程度，温度也没有太扩散，应该还是能够接受的。

7950 的效果非常好，日常使用时候温度只有 51 度左右，我很少在轻薄本上见过这种温度表现，它甚至好过刚出厂时候的表现，我非常的满意。

可以说某种角度来说，这台电脑算是浴火重生了，我对它再战 3 年很有自信。

## BIOS Tunning

这个本子是完全可以降压运行的，降压运行会显著提升温度表现。这其实是一个 Intel SGX 的漏洞，但是从新版本 BIOS 开始，Dell 封堵了这个漏洞，降压功能在 BIOS 里默认是关闭的，这导致在 Linux 中无法降压。

我同时在使用 Hacktintosh，Hackintosh 用户都知道，最好要在 BIOS 里关闭 CFG Lock 选项，这样才能在 Hackintosh 中完全正常电源管理等等。

8 代 CPU 支持 GVT-g，可以在 Linux 中使用虚拟显卡显著提升虚拟机中的图形性能，这个功能需要分配一部分显存给虚拟显卡。这个本子显存在 Linux 下只给核显 256MB，只能申请一个 v5.8 的虚拟显卡，而这个虚拟显卡只支持到 1024x768 分辨率，完全没有实用价值。为了给核显分配更多内存，也需要修改 BIOS 中的选项。

这三个选项在 BIOS 中都是不能直接修改的，必须使用 UEFI Shell 来修改，大概的方法是，先用 UEFITool Dump BIOS 的其中一部分，之后用 IFR-Extractor 解析出来 offset 和支持的值，最后启动到 UEFI Shell 修改或使用一个修改版本的 GRUB 修改。

先把命令写下面，具体方式就 TO-DO 吧。

```shell
setup_var3 0x823 0x0f
setup_var3 0x5BD 0x00
setup_var3 0x659 0x00
```

原本我都有看新电脑的打算了，却没想到这台电脑远比我想象的潜力要大得多，而且另一方面我对这台电脑的使用体验各方面还都挺满意的，真的要换电脑其实也有点舍不得，目前来说这个结局是最好的。
